{"id":"index.html","dependencies":[{"name":"./canvas.css","dynamic":true,"parent":"C:\\Users\\86173\\Desktop\\canvas\\index.html","resolved":"C:\\Users\\86173\\Desktop\\canvas\\canvas.css"},{"name":"./delete.svg","dynamic":true,"parent":"C:\\Users\\86173\\Desktop\\canvas\\index.html","resolved":"C:\\Users\\86173\\Desktop\\canvas\\delete.svg"},{"name":"./throttle.js","dynamic":true,"parent":"C:\\Users\\86173\\Desktop\\canvas\\index.html","resolved":"C:\\Users\\86173\\Desktop\\canvas\\throttle.js"}],"generated":{"html":"\r\n    <!DOCTYPE html>\r\n    <html lang=\"zh-CN\">\r\n\r\n    <head>\r\n        <meta charset=\"UTF-8\">\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover\">\r\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\r\n        <title>Canvas</title>\r\n        <link rel=\"stylesheet\" href=\"/75af0e1ba76391212bcbb4a662288286.css\">\r\n    </head>\r\n\r\n    <body>\r\n        <div class=\"header\">\r\n            <div class=\"color black active\"></div>\r\n            <div class=\"color grey\"></div>\r\n            <div class=\"color red\"></div>\r\n            <div class=\"color blue\"></div>\r\n            <div class=\"color green\"></div>\r\n            <div class=\"color yellow\"></div>\r\n            <div class=\"color pink\"></div>\r\n            <div class=\"color purple\"></div>\r\n            <div class=\"color orange\"></div>\r\n            <div class=\"color skyblue\"></div>\r\n            <div class=\"pen\">\r\n                <div class=\"style normal active\">\r\n                    <div class=\"normal\"></div>\r\n                </div>\r\n                <div class=\"style blur\">\r\n                    <div class=\"blur\"></div>\r\n                </div>\r\n            </div>\r\n            <div class=\"delete\"><img src=\"/04d5ff8782011630561e36035bc4f073.svg\" width=\"30px\"></div>\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"aside\">\r\n                <div class=\"line width1\">\r\n                    <div class=\"width1\"></div>\r\n                </div>\r\n                <div class=\"line width2\">\r\n                    <div class=\"width2\"></div>\r\n                </div>\r\n                <div class=\"line width4\">\r\n                    <div class=\"width4\"></div>\r\n                </div>\r\n                <div class=\"line width5 active\">\r\n                    <div class=\"width5\"></div>\r\n                </div>\r\n                <div class=\"line width7\">\r\n                    <div class=\"width7\"></div>\r\n                </div>\r\n                <div class=\"line width8\">\r\n                    <div class=\"width8\"></div>\r\n                </div>\r\n                <div class=\"line width10\">\r\n                    <div class=\"width10\"></div>\r\n                </div>\r\n            </div>\r\n            <canvas class=\"canvas\">\r\n                您的浏览器不支持canvas模块，请升级浏览器。\r\n            </canvas>\r\n        </div>\r\n\r\n        <script src=\"https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js\"></script>\r\n        <script src=\"/66f40e2b8a2b275552f0034c85640d1a.js\"></script>\r\n\r\n        <script>\r\n            const canvas = document.getElementsByClassName('canvas')[0];\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\tlet strokeColor = '#000';\r\n\t\tlet lineThick = 5;\r\n\t\tlet lineBlur = false;\r\n\t\t// 设置画布宽高等于浏览器窗口\r\n\t\tcanvas.width = document.documentElement.clientWidth - 44;\r\n\t\tcanvas.height = document.documentElement.clientHeight - 44;\r\n\t\t// 填充和笔触颜色\r\n\t\tctx.fillStyle = 'black';\r\n\t\tctx.strokeStyle = strokeColor;\r\n\t\tctx.lineWidth = lineThick;\r\n\t\tctx.lineCap = 'round';\r\n\t\tctx.shadowColor = strokeColor;\r\n\t\tctx.shadowBlur = 0;\r\n\t\t// 先设置绘图模式开关\r\n\t\tlet painting = false;\r\n\t\t// 记录绘图时鼠标按下的位置，以连线\r\n\t\tlet last = [];\r\n\t\t// 绘图起始时间\r\n\t\tlet lastTime;\r\n\r\n\t\t// 绘图函数\r\n\t\tfunction drawLine(x0, y0, x1, y1) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(x0, y0);\r\n\t\t\tctx.lineTo(x1, y1);\r\n\t\t\tctx.stroke();\r\n\t\t\t// console.log(x0, y0, x1, y1);\r\n\t\t}\r\n\r\n\t\t// 绑定颜色按钮\r\n\t\tconst colorBtns = $('.color');\r\n\t\tfor(let el of colorBtns) {\r\n\t\t\tel.onclick = (e) => {\r\n\t\t\t\tconst name = e.target.className;\r\n\t\t\t\tif(!name.includes('active')) {\r\n\t\t\t\t\t$('.color').removeClass('active');\r\n\t\t\t\t\te.target.className +=' active';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst style = getComputedStyle(e.target);\r\n\t\t\t\tstrokeColor = style.backgroundColor;\r\n\t\t\t\tctx.strokeStyle = strokeColor;\r\n\t\t\t\tctx.shadowColor = strokeColor;\r\n\t\t\t\tconsole.log(strokeColor);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 绑定线条粗细按钮\r\n\t\tconst lineBtns = $('.line');\r\n\t\tfor(let el of lineBtns) {\r\n\t\t\tel.onclick = (e) => {\r\n\t\t\t\tconst name = e.currentTarget.className;\r\n\t\t\t\tif(!name.includes('active')) {\r\n\t\t\t\t\t$('.line').removeClass('active');\r\n\t\t\t\t\te.currentTarget.className +=' active';\r\n\t\t\t\t}\r\n\t\t\t\tconst thick = name.match(/\\d{1,2}/)[0];\r\n\t\t\t\tlineThick = parseInt(thick);\r\n\t\t\t\tctx.lineWidth = lineThick;\r\n\t\t\t\tctx.shadowBlur = lineBlur? (lineThick + 1): 0;\r\n\t\t\t\tconsole.log(lineThick);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 绑定画笔样式 blur\r\n\t\tconst styleBtns = $('.style');\r\n\t\tfor(let el of styleBtns) {\r\n\t\t\tel.onclick = (e) => {\r\n\t\t\t\tconst name = e.currentTarget.className;\r\n\t\t\t\tif(!name.includes('active')) {\r\n\t\t\t\t\t$('.style').removeClass('active');\r\n\t\t\t\t\te.currentTarget.className +=' active';\r\n\t\t\t\t}\r\n\t\t\t\tif(name.includes('blur')) {\r\n\t\t\t\t\tlineBlur = true;\r\n\t\t\t\t\tctx.shadowBlur = lineThick + 1;\r\n\t\t\t\t\tconsole.log('blur');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlineBlur = false;\r\n\t\t\t\t\tctx.shadowBlur = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 清空\r\n\t\t$('.delete')[0].onclick = () => {\r\n\t\t\tctx.clearRect(0, 0, 2000, 2000);\r\n\t\t}\r\n\t\t\r\n\t\tconst isTouchDevice = 'ontouchstart' in document.documentElement;\r\n\r\n\t\tif(isTouchDevice) {\r\n\t\t\tconst noneClass = [1, 3, 5, 7, 8, 9];\r\n\t\t\tnoneClass.forEach(i => {\r\n\t\t\t\tcolorBtns[i].style.display = 'none';\r\n\t\t\t})\r\n\t\t\t$('.pen')[0].style.left = '10px';\r\n\t\t}\r\n\t\t\r\n\t\t// 手机端监听触摸屏\r\n\t\tif (isTouchDevice) {\r\n\t\t\tcanvas.ontouchstart = (e) => {\r\n\t\t\t\tlast = [e.touches[0].clientX - 44, e.touches[0].clientY - 44];\r\n\t\t\t}\r\n\r\n\t\t\tcanvas.ontouchmove = throttle((e) => {\r\n\t\t\t\tlet x = e.touches[0].clientX - 44;\r\n\t\t\t\tlet y = e.touches[0].clientY - 44;\r\n\t\t\t\t// window.requestAnimationFrame(() => {\r\n\t\t\t\t// });\r\n\t\t\t\t\tdrawLine(last[0], last[1], x, y);\r\n\t\t\t\t\tlast = [x, y];\r\n\t\t\t}, 1000/60);\r\n\t\t}\r\n\t\telse if(!isTouchDevice) {\r\n\t\t\t// 电脑端监听鼠标事件\r\n\t\t\tcanvas.onmousedown = (e) => {\r\n\t\t\t\tpainting = true;\r\n\t\t\t\tlast = [e.clientX - 44, e.clientY - 44];\r\n\t\t\t}\r\n\r\n\t\t\tcanvas.onmousemove = throttle((e) => {\r\n\t\t\t\tif (painting === true) {\r\n\t\t\t\t\tdrawLine(last[0], last[1], e.clientX - 44, e.clientY - 44);\r\n\t\t\t\t\tlast = [e.clientX - 44, e.clientY - 44];\r\n\t\t\t\t}\r\n\t\t\t}, 1000/60);\r\n\r\n\t\t\tcanvas.onmouseleave = () => {\r\n\t\t\t\tpainting = false;\r\n\t\t\t}\r\n\t\t\tcanvas.onmouseup = () => {\r\n\t\t\t\tpainting = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n        </script>\r\n    </body>\r\n\r\n    </html>\r\n"},"hash":"265a2483e9b2919c6b0d734da3486c0c","cacheData":{}}